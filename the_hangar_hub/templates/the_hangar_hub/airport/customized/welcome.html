{% extends 'base/template/standard/template.html' %}
{% load base_taglib %}
{% load upload_taglib %}
{% load static %}

{%block title%}Welcome to {{airport.display_name}}{%endblock%}

{% block main_content %}
<div class="container-xxl py-4  content-center">

  <header class="mb-4">
    <h1 class="h2 mb-1">{{ airport.display_name }}</h1>
    {% if custom_content.url %}
      <a href="{{ custom_content.url }}" target="_blank" rel="noopener" class="link-primary">
        Visit website
      </a>
    {% endif %}
  </header>

  <div class="row g-4">

    <div class="col-12 col-lg-8">

        {%if blog_entries%}
        <h2>News and Events</h2>
        <div id="airport-blog">
            {% for entry in blog_entries %}
                {%with uploaded_image=entry.main_image%}

                <div class="card float-left" data-entry_id="{{entry.id}}" onclick="read_more($(this));">
                    {% if uploaded_image %}
                        {%file_preview file=uploaded_image class="card-img-top" aria-hidden="true" link=False%}
                    {% endif %}
                    <div class="card-body">
                        <b class="card-title">{{entry.title}}</b>
                        <div class="card-text">
                            {{ entry.content|striptags }}
                            <br />
                        </div>
                    </div>
                    <div class="read-more float-right">
                        {%icon bi-three-dots title="Read More" style="display:inline-block;margin:10px 15px;"%}
                    </div>
                    <br style="clear:both;" />
                </div>
                {% endwith %}
            {% endfor %}

        </div>
        <style>
            #airport-blog .card{
                max-width: 250px;
                margin-right: 15px;
                margin-bottom: 15px;
            }
            #airport-blog .card-body{
                height: 120px;
                font-size: .9em;
                overflow: hidden;
            }
            .blog-popup{
                background-color: white;
            }
            .blog-popup .card-title{
                display:block;
                margin: 25px 0;
                font-size: 2em;
            }
            .blog-popup .card-text{

            }
        </style>
        <script type="text/javascript">
            {%include "the_hangar_hub/airport/customized/management/blog/blog.js"%}
        </script>
        {%endif%}

    </div>
    <div class="col-12 col-md-4">



      {# FUEL PRICES #}
    {% if custom_content.avgas_price or custom_content.jeta_price or custom_content.mogas_price %}
      <div class="card mb-3">
        <div class="card-header d-flex align-items-center justify-content-between">
          <h2 class="h5 mb-0">Fuel Prices</h2>
          <small class="text-muted">Per gallon</small>
        </div>
        <div class="card-body">
          <div class="row g-3 text-center">
            {% if custom_content.avgas_price %}
              <div class="col-6">
                <div class="border rounded p-3 h-100 ">
                  <b class="badge fs-5" style="background-color:red;">100LL</b>
                  <div class="fs-4 fw-bold text-center" style="white-space:nowrap;">${{ custom_content.avgas_price }}</div>
                </div>
              </div>
            {% endif %}
            {% if custom_content.jeta_price %}
              <div class="col-6">
                <div class="border rounded p-3 h-100">
                  <b class="badge fs-5" style="background-color:black;">Jet A</b>
                  <div class="fs-4 fw-bold text-center" style="white-space:nowrap;">${{ custom_content.jeta_price }}</div>
                </div>
              </div>
            {% endif %}
            {% if custom_content.mogas_price %}
              <div class="col-6">
                <div class="border rounded p-3 h-100">
                  <b class="badge fs-5" style="background-color:#C2B280;color:black;">Mogas</b>
                  <div class="fs-4 fw-bold text-center" style="white-space:nowrap;">${{ custom_content.mogas_price }}</div>
                </div>
              </div>
            {% endif %}
          </div>
        </div>
      </div>



      {# OFFICE HOURS #}
    {% with hm=custom_content.hours_m ht=custom_content.hours_t hw=custom_content.hours_w hr=custom_content.hours_r hf=custom_content.hours_f hs=custom_content.hours_s hu=custom_content.hours_u %}
    {% if hm or ht or hw or hr or hf or hs or hu %}
        <div class="card mb-3">
            <div class="card-header">
              <h2 class="h5 mb-0">Office Hours</h2>
            </div>
            <div class="card-body">
              <table class="table table-sm mb-1">
                <tbody>
                  {% if hm %}<tr><th scope="row" class="w-25">Mon</th><td>{{ hm }}</td></tr>{% endif %}
                  {% if ht %}<tr><th scope="row" class="w-25">Tue</th><td>{{ ht }}</td></tr>{% endif %}
                  {% if hw %}<tr><th scope="row" class="w-25">Wed</th><td>{{ hw }}</td></tr>{% endif %}
                  {% if hr %}<tr><th scope="row" class="w-25">Thu</th><td>{{ hr }}</td></tr>{% endif %}
                  {% if hf %}<tr><th scope="row" class="w-25">Fri</th><td>{{ hf }}</td></tr>{% endif %}
                  {% if hs %}<tr><th scope="row" class="w-25">Sat</th><td>{{ hs }}</td></tr>{% endif %}
                  {% if hu %}<tr><th scope="row" class="w-25">Sun</th><td>{{ hu }}</td></tr>{% endif %}
                </tbody>
              </table>
                {%if custom_content.after_hours%}
                <b>After-Hours</b>
                <div class="indent">{{custom_content.after_hours|linebreaksbr}}</div>
                {%endif%}
            </div>
      </div>

    {% endif %}
    {% endwith %}


    {# CONTACT #}
    {% if custom_content.contact_phone or custom_content.contact_email or custom_content.contact_address or custom_content.frequencies %}

      <div class="card mb-3">
        <div class="card-header">
          <h2 class="h5 mb-0">Contact Info</h2>
        </div>
        <div class="card-body">
          {% if custom_content.contact_phone %}
            <div class="mb-2">
              <div class="text-muted mb-1 small">Phone</div>
              <a href="tel:{{ custom_content.contact_phone }}" class="fw-semibold">{{ custom_content.contact_phone }}</a>
            </div>
          {% endif %}

          {% if custom_content.contact_email %}
            <div class="mb-2">
              <div class="text-muted mb-1 small">Email</div>
              <a href="mailto:{{ custom_content.contact_email }}" class="fw-semibold">{{ custom_content.contact_email }}</a>
            </div>
          {% endif %}

          {% if custom_content.contact_address %}
            <div class="mb-2">
              <div class="text-muted mb-1 small">Address</div>
              <div>{{ custom_content.contact_address|linebreaksbr }}</div>
            </div>
          {% endif %}

        {# FREQUENCIES #}
        {% if custom_content.frequencies %}
            <div class="mb-2">
                <div class="text-muted mb-1 small">Frequencies</div>
                    <div>
                        <div class="mb-0">{{ custom_content.frequencies|linebreaksbr }}</div>
                    </div>
                </div>
            </div>
        {% endif %}
        </div>

      {# AMENITIES #}
        {%if custom_content.amenities%}
      <div class="card mb-3">
        <div class="card-header">
          <h2 class="h5 mb-0">Amenities</h2>
        </div>
        <div class="card-body">
            <div class="list-group">
            {%for amenity in custom_content.amenities%}
                <div class="list-group-item">
                {%if amenity.icon%}
                    {%icon icon_class=amenity.icon%}
                {%else%}
                    {%icon icon_class="bi-trash"%}
                {%endif%}
            {{amenity.title}}
                </div>

            {%endfor%}
            </div>
        </div>
      </div>
        {%endif%}

      </div>
    {% endif %}


    </div>
    {% endif %}






  </div>

  {# FALLBACK when nothing set #}
  {% if not custom_content.contact_phone and not custom_content.contact_email and not custom_content.contact_address and not custom_content.frequencies and not custom_content.hours_m and not custom_content.avgas and not custom_content.jeta %}
    <div class="alert alert-info mt-4">
      Airport details havenâ€™t been published yet. Please check back soon.
    </div>
  {% endif %}

</div>
{%endblock%}