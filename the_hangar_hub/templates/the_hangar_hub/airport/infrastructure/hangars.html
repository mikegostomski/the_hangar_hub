{% extends 'base/template/standard/template.html' %}
{% load base_taglib %}

{%block title%}Hangars: {{building.code}}{%endblock%}

{% block main_content %}
<div class="content-1024">
    <h1>Hangars in {{building.code}}</h1>
    <em>Note: Each hangar code must be unique to your airport. By default, the building code will be prepended to numbered hangar codes.</em><br />
    <br />

    <form method="POST" action="{%url 'infrastructure:add_hangar' airport.identifier building.id%}">
        {%csrf_token%}
    <table class="table">
        <tr valign="top">
            <th scope="col">Hangar Code</th>
            <th scope="col" width="120">Default Rent</th>
            <th scope="col" class="" width="200">Amenities</th>
            <th scope="col" width="100">Capacity</th>
            <th scope="col">Tenant(s)</th>
            <th scope="col" class="text-center">
                <span class="visually-hidden">Actions</span>
            </th>
        </tr>
        {%for hangar in hangars%}
            <tr data-hangar_id="{{hangar.code}}">
                <td>
                    <a href="{%url 'infrastructure:hangar' airport.identifier hangar.id%}">{{hangar.code}}</a>
                </td>
                <td align="right">{%format_currency hangar.rent%}</td>
                <td align="">
                    {%if hangar.electric%}
                        {%icon bi-lightbulb title="Electricity"%}
                    {%endif%}
                    {%if hangar.heated%}
                        {%icon bi-fire title="Heated"%}
                    {%endif%}
                    {%if hangar.water%}
                        {%icon bi-droplet title="Has Water"%}
                    {%endif%}
                    {%if hangar.shelves%}
                        {%icon bi-bookshelf title="Shelves/Storage"%}
                    {%endif%}
                    {%if hangar.auto_door%}
                        {%icon bi-door-open title="Automated Door"%}
                    {%endif%}
                    {%if hangar.wifi%}
                        {%icon bi-wifi title="WiFi"%}
                    {%endif%}
                </td>
                <td align="right">{{hangar.capacity}}</td>
                <td>
                    {%for rental in hangar.present_rental_agreements%}
                        {{rental.tenant.display_name}}
                    {%empty%}
                        {%for future_rental in hangar.future_rentals%}
                            <em>
                            {%icon bi-clock title="Future Tenant"%} {{future_rental.tenant.display_name}}
                            </em>

                        {%empty%}
                            <em class="text-muted">No Current/Future Tenants</em>
                        {%endfor%}
                    {%endfor%}

                </td>
                <td align="right">
                    {%icon bi-trash text-danger title="Delete Hangar {{hangar.code}}" onclick="delete_hangar($(this));"%}
                </td>
            </tr>
        {%endfor%}
        <tr>
            <td>
                <label for="hangar_code" class="visually-hidden">Hangar Code</label>
                <input type="text" id="hangar_code" name="hangar_code" placeholder="{{building.code}}-#" class="form-control" />
            </td>
            <td>
                <label for="default_rent" class="visually-hidden">Default Rent</label>
                <input type="text" id="default_rent" name="default_rent" value="{%format_currency building.default_rent%}" placeholder="$0.00" class="form-control" style="text-align:right;" />
            </td>

            <td align="">
                <div class="icon-checkbox-container lg">
                    <label>
                        <input type="checkbox" name="electric" value="1" class="visually-hidden" />
                        {%icon bi-square title="Electricity" data_unchecked="bi-lightbulb" data_checked="bi-lightbulb-fill"%}
                    </label>
                    <label>
                        <input type="checkbox" name="heated" value="1" class="visually-hidden" />
                        {%icon bi-square title="Heated" data_unchecked="bi-thermometer-snow" data_checked="bi-fire"%}
                    </label>
                    <label>
                        <input type="checkbox" name="water" value="1" class="visually-hidden" />
                        {%icon bi-square title="Has Water" data_unchecked="bi-droplet" data_checked="bi-droplet-fill"%}
                    </label>
                    <label>
                        <input type="checkbox" name="shelves" value="1" class="visually-hidden" />
                        {%icon bi-square title="Shelves/Storage" data_unchecked="bi-archive" data_checked="bi-archive-fill"%}
                    </label>
                    <label>
                        <input type="checkbox" name="auto_door" value="1" class="visually-hidden" />
                        {%icon bi-square title="Automated Door" data_unchecked="bi-door-open" data_checked="bi-door-open-fill"%}
                    </label>
                    <label>
                        <input type="checkbox" name="wifi" value="1" class="visually-hidden" />
                        {%icon bi-square title="WiFi" data_unchecked="bi-wifi-off" data_checked="bi-wifi"%}
                    </label>
                </div>
            </td>
            <td>
                <label for="capacity" class="visually-hidden">Capacity</label>
                <input type="number" id="capacity" name="capacity" placeholder="1" class="form-control" style="text-align:right;" />
            </td>
            <td>&nbsp;</td>
            <td>
                <button type="submit" class="btn btn-success btn-sm">Add Hangar</button>
            </td>
        </tr>
    </table>

    </form>

    <div class="alert alert-info hobbs-tip">
        <strong>Add Hangars in Bulk</strong><br />
        To bulk-add hangars with sequenced codes, enter the number of desired hangars in brackets.<br />
        Example:<br />
        <div class="indent list-group">
            <div class="list-group-item">
                Hangar Code: "[5]" would create hangars {{building.code}}-1 through {{building.code}}-5
            </div>
            <div class="list-group-item">
                Hangar Code: "Alpha-[5]" would create hangars Alpha-1 through Alpha-5
            </div>

        </div>
    </div>
</div>

    {%include "the_hangar_hub/airport/application/management/_selected_application.html"%}

    <script type="text/javascript">
        {%include "the_hangar_hub/airport/infrastructure/scripts.js"%}
    </script>
{%endblock%}