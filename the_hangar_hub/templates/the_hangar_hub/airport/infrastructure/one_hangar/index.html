{% extends 'base/template/standard/template.html' %}
{% load base_taglib %}

{%block title%}Hangar: {{hangar.code}}{%endblock%}

{% block main_content %}
<h1>{{hangar.code}}</h1>

<div class="content-block">
    <h2>Hangar Data</h2>
    {%include "the_hangar_hub/airport/infrastructure/one_hangar/_table_hangar_data.html"%}
</div>

<div class="content-block">
    <h2>Current/Future Tenants</h2>

    <table class="table">
        <tr>
            <th scope="col">First Name</th>
            <th scope="col">Last Name</th>
            <th scope="col">Email Address</th>
            <th scope="col">Start Date</th>
            <th scope="col">End Date</th>
            <th scope="col">Rent</th>
            <th scope="col">Deposit</th>
            <th scope="col">Notes</th>
            <th scope="col">Actions</th>
        </tr>
        {%for rental in hangar.present_rental_agreements%}
            {%include "the_hangar_hub/airport/infrastructure/one_hangar/_tr_rental_agreement.html" with rental=rental%}
        {%empty%}
            {%if not hangar.future_rentals%}
            <tr>
                <td colspan="9" class="text-center">No Current Tenants</td>
            </tr>
            {%endif%}
        {%endfor%}

        {%for rental in hangar.future_rentals%}
            {%include "the_hangar_hub/airport/infrastructure/one_hangar/_tr_rental_agreement.html" with rental=rental%}
        {%endfor%}

        {%include "the_hangar_hub/airport/infrastructure/one_hangar/_tr_new_tenant_form.html" %}
    </table>
</div>


<div class="content-block">
    <h2>Maintenance Requests</h2>
    ToDo: Display Recent Maintenance Requests
</div>


<div class="content-block">
    <h2>Rental History</h2>
    <table class="table">
        <tr>
            <th scope="col">Tenant</th>
            <th scope="col">Start Date</th>
            <th scope="col">End Date</th>
            <th scope="col">Rent</th>
            <th scope="col">Deposit</th>
            <th scope="col">Notes</th>
        </tr>
        {%for rental in rentals%}
            <tr>
                <td>{{rental.tenant}}</td>
                <td>{{rental.start_date|date:preferred_date_format}}</td>
                <td>{{rental.end_date|date:preferred_date_format}}</td>
                <td>{{rental.rent}}</td>
                <td>{{rental.deposit}}</td>
                <td>{{rental.notes}}</td>
            </tr>
        {%empty%}
            <tr>
                <td colspan="6" class="text-center">No Rental History</td>
            </tr>
        {%endfor%}
    </table>
</div>

{%include "the_hangar_hub/airport/application/management/_selected_application.html"%}


{%endblock%}