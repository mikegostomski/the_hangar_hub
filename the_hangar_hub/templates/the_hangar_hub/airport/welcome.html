{% extends 'base/template/standard/template.html' %}
{% load base_taglib %}

{%block title%}The Hangar Hub: Airport Identifier{%endblock%}

{% block main_content %}
<div class="content-800">
    <h1>Airport Identification</h1>
    <br />
    <form method="get">
        Enter the FAA/ICAO identifier for the airport you are managing:<br />
        <br />
        <label for="identifier" class="visually-hidden">Airport Identifier</label>

        <div class="input-group mb-3">
            <input type="text" id="identifier" name="identifier" class="form-control initial-focus" value="{{identifier|default:''}}" placeholder="Airport Identifier" maxlength="7" />
            <button class="btn btn-success" type="submit">
                {%icon bi-send title="Submit"%}
            </button>
        </div>
    </form>

    {%if matches%}
        <b>Select your airport:</b><br />
        <table class="table table-striped table-hover table-condensed" id="airport-table">
            <tr>
                <th scope="col">Identifier</th>
                <th scope="col">Airport Name</th>
                <th scope="col">City</th>
                <th scope="col">Select</th>
            </tr>
            {%for match in matches%}
            <tr>
                <td>{{match.identifier}}</td>
                <td>{{match.display_name}}</td>
                <td>{{match.city}}, {{match.state}}</td>
                <td>
                    <form method="post" action="{%url 'hub:select_airport'%}">
                        {%csrf_token%}
                        <input type="hidden" name="airport_id" value="{{match.id}}" />
                        <button class="btn btn-info btn-sm" type="submit">Select</button>
                    </form>
                </td>
            </tr>
            {%endfor%}
        </table>
    {%elif identifier%}
        <div class="alert alert-danger">
            "{{identifier}}" did not match any airports. Please check the identifier and try again.
        </div>
    {%endif%}
</div>
{%endblock%}