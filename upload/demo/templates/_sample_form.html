{% load base_taglib %}
{% load upload_taglib %}

<form method="post" enctype="multipart/form-data" action="{%url 'upload_action'%}" onsubmit="setPageLoadIndicator();">
    {%csrf_token%}
    
    <label>
        <input type="radio" name="display_only" value="Y" onclick="toggle_ajax_upload();" />
        Display contents as <b>plain-text</b> without saving it
    </label><br />
    <label>
        <input type="radio" name="display_only" value="N" onclick="toggle_ajax_upload();" checked />
        Background Upload (AJAX) with image resizing
    </label><br />
    <br />

    <div id="non-ajax-container" class="hidden">
        <label for="sample_file">Upload an "office-like" file:</label><br />
        <div id="sample_file_upload_container" class="dnd-container" >
            <div class="dnd-background">
                ... or drag 'n drop
            </div>
            <input type="file" multiple="multiple"
                   name="sample_file" id="sample_file"
                   class="dnd-input"
                   onchange="this.form.submit();"
            />
        </div>
    </div>
    <div id="ajax-container" class="hidden">
        <label for="sample_file_ajax">Upload an "office-like" file:</label><br />
        {%include 'base/upload/_dnd_input.html' with input_name="sample_file_ajax" upload_url="upload_action" %}
    </div>
    <br />

    <input type="submit" class="btn btn-success" />
</form>

{%include 'base/upload/_dnd_assets.html'%}
<script type="text/javascript">
    function toggle_ajax_upload(){
        let radio = $('input[name=display_only]:checked');
        let non = $('#non-ajax-container');
        let ajax = $('#ajax-container');

        if(radio.val() == 'Y'){
            non.removeClass('hidden');
            ajax.addClass('hidden');
        }
        else{
            ajax.removeClass('hidden');
            non.addClass('hidden');
        }
    }
    toggle_ajax_upload();
</script>